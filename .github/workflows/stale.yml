name: Mark Stale Issues and PRs

on:
  schedule:
    - cron: "0 8 * * *" # Daily at 8 AM UTC (5 AM Brazil time)
  workflow_dispatch: # Allow manual trigger

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Mark Stale
    runs-on: ubuntu-latest
    steps:
      - name: Mark stale issues and PRs
        uses: actions/stale@v9
        with:
          # Issues configuration
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-label: "stale"
          stale-issue-message: |
            Esta issue foi marcada como stale porque n√£o houve atividade por 60 dias.

            Se esta issue ainda √© relevante, por favor:
            - Adicione um coment√°rio explicando a situa√ß√£o atual
            - Forne√ßa informa√ß√µes adicionais se solicitadas
            - Atualize o caso de uso se necess√°rio

            Esta issue ser√° fechada automaticamente em 14 dias se n√£o houver mais atividade.

            Para evitar que isso aconte√ßa novamente, considere:
            - Responder rapidamente a perguntas dos mantenedores
            - Fornecer exemplos reproduz√≠veis
            - Manter a issue atualizada com novas informa√ß√µes

          close-issue-message: |
            Esta issue foi fechada automaticamente por inatividade.

            Se voc√™ acredita que esta issue ainda √© relevante:
            - Abra uma nova issue referenciando esta
            - Forne√ßa informa√ß√µes atualizadas
            - Inclua passos claros para reproduzir (se for um bug)

            Obrigado por contribuir com o pypix-api! üöÄ

          # Pull Requests configuration
          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-label: "stale"
          stale-pr-message: |
            Este Pull Request foi marcado como stale porque n√£o houve atividade por 30 dias.

            Para manter este PR ativo:
            - Responda aos coment√°rios de review
            - Fa√ßa as altera√ß√µes solicitadas
            - Rebase com a branch principal se necess√°rio
            - Adicione um coment√°rio explicando o status atual

            Este PR ser√° fechado automaticamente em 7 dias se n√£o houver mais atividade.

          close-pr-message: |
            Este Pull Request foi fechado automaticamente por inatividade.

            Se voc√™ ainda deseja mergear estas altera√ß√µes:
            - Abra um novo PR com as altera√ß√µes atualizadas
            - Certifique-se de que est√° baseado na vers√£o mais recente da main
            - Responda aos coment√°rios de review pendentes

            Obrigado por sua contribui√ß√£o! üöÄ

          # Labels to exempt from stale marking
          exempt-issue-labels: "pinned,security,enhancement,good-first-issue,help-wanted"
          exempt-pr-labels: "pinned,security,breaking-change,wip"

          # Draft PRs are automatically exempt
          exempt-draft-pr: true

          # Don't mark as stale if there are recent comments from collaborators
          exempt-all-assignees: true

          # Operations per run (to avoid rate limiting)
          operations-per-run: 100

          # Enable debug logging
          debug-only: false
